#==============================================================================
# vim: softtabstop=2 shiftwidth=2 expandtab fenc=utf-8 cc=81 tw=80
#==============================================================================
#
# DESCRIPTION: Debian10 x64 min Grid'5000 environment
#
#==============================================================================
---
extend: from_scratch/debian-buster.yaml

global:
  appliance_formats: qcow2 tar.gz
  output: "$${kameleon_cwd}/$${kameleon_recipe_name}" # output files basename
  variant: min # default value for variant. Can be overwritten by --global=variant:<my_variant> when calling kameleon
  image_version: 2018120622
  os_family: $${distrib}
  os_release: $${release}
  os_codename: $${distrib}$${release}
  release_number: $${release}
  g5k_tgz_path: server:///path/to/your/image
  g5k_postinst_path: server:///grid5000/postinstalls/g5k-postinstall.tgz
  g5k_postinst_script: g5k-postinstall --net debian
  g5k_kernel_params: ""
  kernel_modules_blacklist: "usb_storage usbhid ohci_hcd ehci_hcd usbcore nouveau myri10ge"

  # disable backports: they are not available for now
  deb_backports: false

bootstrap:
  - "@base"

setup:
  - "@base"
  - configure_apt
  - set_grid5000_release
  - set_kernel_modules_blacklist
  - clean_system

export:
  - "@base"
  - cloud_init_qcow2
  - export_g5k
