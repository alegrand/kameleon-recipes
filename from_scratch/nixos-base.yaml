#==============================================================================
# vim: softtabstop=2 shiftwidth=2 expandtab fenc=utf-8 cc=81 tw=80
#==============================================================================
#
# DESCRIPTION: NIXOS
#
#==============================================================================
---
extend: base.yaml

global:
  distrib: nixos
  release: 19.03
  release_minor_and_hash: 173068.9ec7625cee5
  iso_location: releases

  iso_filename: nixos-minimal-$${release}.$${release_minor_and_hash}-$${arch}-linux.iso
  #iso_url: http://nixos.org/$${iso_location}/nixos/$${release}-small/nixos-$${release}.$${release_minor_and_hash}/$${iso_filename}
  iso_url: file:///home/neyron/scm/OAR/kameleon-recipes/build/$${iso_filename}
  iso_path: $${kameleon_cwd}/$${distrib}.iso

  qemu_sendkeys_commands: $${kameleon_data_dir}/qemu-sendkeys/netinst-iso-$${distrib}
  qemu_memory_size: 2048

  first_vm_boot_timeout: 40

  autoinstall_script_path: $${kameleon_data_dir}/$${distrib}/autoinstall.sh
  root_password: root

  # override this configuration by adding yours to this folder
  # ./step/data/configuration.nix
  nix_hardware_configuration: $${kameleon_data_dir}/$${distrib}/hardware-configuration.nix
  nix_configuration: $${kameleon_data_dir}/$${distrib}/configuration.nix

bootstrap:
  - "@base"
  - breakpoint
setup:
  - "@base"
  - breakpoint

export:
  - "@base"
